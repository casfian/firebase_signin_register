---
title: Social Authentication
sidebar_label: Social Auth
---

Social authentication is a multi-step authentication flow, allowing you to sign a user into an account or link
them with an existing one.

Both native platforms and web support creating a credential which can then be passed to the [`signInWithCredential`](!firebase_auth.FirebaseAuth.signInWithCredential)
or [`linkWithCredential`](!firebase_auth.User.linkWithCredential) methods. Alternatively on web platforms, you can trigger the authentication process via
a popup or redirect.

## Google

Most configuration is already setup when using Google Sign-In with Firebase, however you need to ensure your machines
SHA1 key has been configured for use with Android. You can see view how to generate the key on the
[Getting Started](overview) documentation.

Ensure the "Google" sign-in provider is enabled on the [Firebase Console](https://console.firebase.google.com/project/_/authentication/providers).

> If your user signs in with Google, after having already manually registered an account, their authentication provider will automatically
> change to Google, due to Firebase Authentications concept of trusted providers. You can find out more about
> this [here](https://groups.google.com/g/firebase-talk/c/ms_NVQem_Cw/m/8g7BFk1IAAAJ).

<Tabs
  defaultValue="native"
  values={[
    { label: 'Native', value: 'native', },
    { label: 'Web', value: 'web', },
  ]
}>
<TabItem value="native">

On native platforms, a 3rd party library is required to trigger the authentication flow.

Install the official [`google_sign_in`](https://pub.dev/packages/google_sign_in) plugin:

```yaml title="pubspec.yaml"
dependencies:
  google_sign_in: ^4.5.1
```

Once installed, trigger the sign-in flow and create a new credential:

```dart
import 'package:google_sign_in/google_sign_in.dart';

Future<UserCredential> signInWithGoogle() async {
  // Trigger the authenticaion flow
  final GoogleSignInAccount googleUser = await GoogleSignIn().signIn();

  // Obtain the auth details from the request
  final GoogleSignInAuthentication googleAuth = await googleUser.authentication;

  // Create a new credential
  final GoogleAuthCredential credential = GoogleAuthProvider.credential(
    accessToken: googleAuth.accessToken,
    idToken: googleAuth.idToken,
  );

  // Once signed in, return the UserCredential
  return await FirebaseAuth.instance.signInWithCredential(credential);
}
```

</TabItem>
<TabItem value="web">

On the web, the Firebase SDK provides support for automatically handling the authentication flow using your Firebase project. For example:

Create a Google auth provider, providing any additional [permission scope](https://developers.google.com/identity/protocols/oauth2/scopes)
you wish to obtain from the user:

```dart
GoogleAuthProvider googleProvider = GoogleAuthProvider();

googleProvider.addScope('https://www.googleapis.com/auth/contacts.readonly');
googleProvider.setCustomParameters({
  'login_hint': 'user@example.com'
});
```

Provide the credential to the [`signInWithPopup`](!firebase_auth.FirebaseAuth.signInWithPopup) method. This will trigger a new
window to appear prompting the user to sign-in to your project:

```dart
Future<UserCredential> signInWithGoogle() async {
  // Create a new provider
  GoogleAuthProvider googleProvider = GoogleAuthProvider();

  googleProvider.addScope('https://www.googleapis.com/auth/contacts.readonly');
  googleProvider.setCustomParameters({
    'login_hint': 'user@example.com'
  });

  // Once signed in, return the UserCredential
  return await FirebaseAuth.instance.signInWithPopup(googleProvider);
}
```

</TabItem>
</Tabs>

## Facebook

Before getting started setup your [Facebook Developer App](https://developers.facebook.com/apps/) and follow the setup process to enable Facebook Login.

Ensure the "Facebook" sign-in provider is enabled on the [Firebase Console](https://console.firebase.google.com/project/_/authentication/providers).
with the Facebook App ID and Secret set.

<Tabs
  defaultValue="native"
  values={[
    { label: 'Native', value: 'native', },
    { label: 'Web', value: 'web', },
  ]
}>
<TabItem value="native">

On native platforms, a 3rd party library is required to both install the Facebook SDK and trigger the authentication flow.

Install the [`flutter_facebook_auth`](https://pub.dev/packages/flutter_facebook_auth) plugin:

```yaml title="pubspec.yaml"
dependencies:
  flutter_facebook_auth: ^0.2.3
```

You will need to follow the steps in the plugin documentation to ensure that both the Android & iOS Facebook SDKs have been initialized
correctly. Once complete, trigger the sign-in flow, create a Facebook credential and sign the user in:

```dart
import 'package:flutter_facebook_auth/flutter_facebook_auth.dart';

Future<UserCredential> signInWithFacebook() async {
  // Trigger the sign-in flow
  final LoginResult result = await FacebookAuth.instance.login();

  // Create a credential from the access token
  final FacebookAuthCredential facebookAuthCredential =
    FacebookAuthProvider.credential(result.accessToken.token);

  // Once signed in, return the UserCredential
  return await FirebaseAuth.instance.signInWithCredential(facebookAuthCredential);
}
```

</TabItem>
<TabItem value="web">

On the web, the Firebase SDK provides support for automatically handling the authentication flow using the
Facebook application details provided on the Firebase console. For example:

Create a Facebook provider, providing any additional [permission scope](https://developers.facebook.com/docs/facebook-login/permissions/)
you wish to obtain from the user:

```dart
FacebookAuthProvider facebookProvider = FacebookAuthProvider();

facebookProvider.addScope('email');
facebookProvider.setCustomParameters({
  'display': 'popup',
});
```

Provide the credential to the [`signInWithPopup`](!firebase_auth.FirebaseAuth.signInWithPopup) method. This will trigger a new
window to appear prompting the user to sign-in to your Facebook application:

```dart
Future<UserCredential> signInWithFacebook() async {
  // Create a new provider
  FacebookAuthProvider facebookProvider = FacebookAuthProvider();

  facebookProvider.addScope('email');
  facebookProvider.setCustomParameters({
    'display': 'popup',
  });

  // Once signed in, return the UserCredential
  return await FirebaseAuth.instance.signInWithPopup(facebookProvider);
}
```

</TabItem>
</Tabs>



### Apple

Apple has [announced](https://developer.apple.com/news/?id=09122019b) that any applications using 3rd party login
services (such as Facebook, Twitter, Google etc) must have an Apple Sign-In method.  Apple Sign-In is not required for Android devices.secret

To integrate Apple Sign-In on your iOS application, you will need to install a 3rd party library to authenticate with Apple.
Once authentication is successful, a Firebase credential can then be used to sign the user into Firebase with their Apple account

> To Do

```dart title="NEEDS UPDATING/VALIDATING"
// Apple credentials
final FirebaseUser user = (await FirebaseAuth.instance.signInWithCredential(credential)).user;
```

### Twitter

Ensure the "Twitter" sign-in provider is enabled on the [Firebase Console](https://console.firebase.google.com/project/_/authentication/providers)
with API Key and API Secret set.

#### Installation

1. Add dependency

```yaml {2} title="pubspec.yaml"
dependencies:
  flutter_twitter: ^1.1.3
```

2. Download dependency

```
$ flutter pub get
```

#### Usage

Once the plugin is installed, we first need to initialize the Twitter plugin using the consumer key and secret.

We can then trigger the Twitter login flow by calling the `authorize` method, and then generate an `AuthCredential` from
the `TwitterAuthProvider`, passing in the accessToken and secrete from the session.

We can then pass this `AuthCredential` to the `signInWithCredential` method to sign the user into Firebase

```dart title="NEEDS UPDATING/VALIDATING"
import 'package:flutter_twitter/flutter_twitter.dart';

Future<void> signInWithTwitter() async {
  try {
      final TwitterLogin twitterLogin = new TwitterLogin(
          consumerKey: 'abc',
          consumerSecret: '123'
      );

      final TwitterLoginResult loginResult = await twitterLogin.authorize();
      final TwitterSession twitterSession = loginResult.session;

      final AuthCredential authCredential = TwitterAuthProvider.credential(accessToken: twitterSession.token, secret: twitterSession.secret);

      await FirebaseAuth.instance.signInWithCredential(authCredential);
  } catch (e) {
      // Handle Error
  }
}
```

When the user has successfully signed in, any [`authStateChanges`](usage#authentication-state) listeners will trigger with the new authentication state
of the user


## GitHub

Ensure the "GitHub" sign-in provider is enabled on the [Firebase Console](https://console.firebase.google.com/project/_/authentication/providers)
with the Client ID and secret set.

#### Installation

1. Add dependency

```yaml {2} title="pubspec.yaml"
dependencies:
  github_sign_in: ^0.0.1
```

2. Download dependency

```
$ flutter pub get
```

#### Usage

```dart title="NEEDS UPDATING/VALIDATING"
import 'package:github_sign_in/github_sign_in.dart';

Future<void> signInWithGitHub() async {
  try {
    final GitHubSignIn gitHubSignIn = GitHubSignIn(
            clientId: clientId,
            clientSecret: clientSecret,
            redirectUrl: redirectUrl);

    var result = await gitHubSignIn.signIn(context);
    final AuthCredential authCredential = GithubAuthProvider.credential(result.token);

    await FirebaseAuth.instance.signInWithCredential(authCredential);

  } catch (e) {
      // Handle Error
  }
}
```

When the user has successfully signed in, any [`authStateChanges`](usage#authentication-state) listeners will trigger with the new authentication state
of the user

