<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<link rel="search" type="application/opensearchdescription+xml" title="FlutterFire" href="/opensearch.xml">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#0175c2"><title data-react-helmet="true">Using Firebase Authentication | FlutterFire</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Using Firebase Authentication | FlutterFire"><meta data-react-helmet="true" name="description" content="Once installed, you can access the firebaseauth plugin by importing it in your Dart code:"><meta data-react-helmet="true" property="og:description" content="Once installed, you can access the firebaseauth plugin by importing it in your Dart code:"><meta data-react-helmet="true" property="og:url" content="https://firebase.flutter.dev/docs/auth/usage"><link data-react-helmet="true" rel="shortcut icon" href="/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://firebase.flutter.dev/docs/auth/usage"><link rel="stylesheet" href="/styles.da17c98e.css">
<link rel="stylesheet" href="/main.4ce985a5.css">
<link rel="stylesheet" href="/1be78505.7cbeb736.css">
<link rel="preload" href="/styles.e7074577.js" as="script">
<link rel="preload" href="/runtime~main.0551df17.js" as="script">
<link rel="preload" href="/main.7f974696.js" as="script">
<link rel="preload" href="/1.5e72a75a.js" as="script">
<link rel="preload" href="/2.729facbb.js" as="script">
<link rel="preload" href="/1be78505.48e83a25.js" as="script">
<link rel="preload" href="/39.d035ed31.js" as="script">
<link rel="preload" href="/41.0766119e.js" as="script">
<link rel="preload" href="/20ac7829.af96a31a.js" as="script">
<link rel="preload" href="/1d2d000f.fb19e66f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/flutterfire_300x.png" alt="FlutterFire Logo"><strong class="navbar__title">FlutterFire</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Docs</a><a href="https://twitter.com/flutterfiredev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><a href="https://github.com/firebaseextended/flutterfire" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/flutterfire_300x.png" alt="FlutterFire Logo"><strong class="navbar__title">FlutterFire</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview">Docs</a></li><li class="menu__list-item"><a href="https://twitter.com/flutterfiredev" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li><li class="menu__list-item"><a href="https://github.com/firebaseextended/flutterfire" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/android">Android Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/ios">iOS Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/web">Web Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/overview">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/auth/usage">Usage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/social">Social Auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/phone">Phone Auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/error-handling">Error Handling</a></li><li class="menu__list-item"><a href="https://pub.dev/documentation/firebase_auth/latest/" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://pub.dev/documentation/firebase_auth/latest/" tabindex="0">Reference API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cloud Firestore</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/firestore/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/firestore/usage">Usage</a></li><li class="menu__list-item"><a href="https://pub.dev/documentation/cloud_firestore/latest/" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://pub.dev/documentation/cloud_firestore/latest/" tabindex="-1">Reference API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/core/usage">Usage</a></li><li class="menu__list-item"><a href="https://pub.dev/documentation/firebase_core/latest/" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://pub.dev/documentation/firebase_core/latest/" tabindex="-1">Reference API</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Using Firebase Authentication</h1></header><div class="markdown"><p>Once installed, you can access the <a href="https://pub.dev/documentation/firebase_auth/latest/firebase_auth/firebase_auth-library.html" target="_blank"><code>firebase_auth</code></a> plugin by importing it in your Dart code:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;package:firebase_auth/firebase_auth.dart&#x27;;</span></div></div></div></div></div><p>Before using Firebase Auth, you must first have ensured you have <a href="/docs/auth/overview#initializing-flutterfire">initialized FlutterFire</a>.</p><p>To create a new Firebase Auth instance, call the <a href="https://pub.dev/documentation/firebase_auth/latest/firebase_auth/FirebaseAuth/instance.html" target="_blank"><code>instance</code></a> getter on <a href="https://pub.dev/documentation/firebase_auth/latest/firebase_auth/FirebaseAuth-class.html" target="_blank"><code>FirebaseAuth</code></a>:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FirebaseAuth auth = FirebaseAuth.instance;</span></div></div></div></div></div><p>By default, this allows you to interact with Firebase Auth using the default Firebase App used whilst installing FlutterFire on your
platform. If however you&#x27;d like to use a secondary Firebase App, use the <span><code>instanceFor</code></span> method:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FirebaseApp secondaryApp = Firebase.app(&#x27;SecondayApp&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">FirebaseAuth auth = FirebaseAuth.instanceFor(app: secondaryApp);</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="authentication-state"></a>Authentication state<a aria-hidden="true" tabindex="-1" class="hash-link" href="#authentication-state" title="Direct link to heading">#</a></h2><p>Firebase Auth provides many methods and utilities for enabling you to integrate secure authentication into your new or existing
Flutter application. In many cases, you will need to know about the authentication <em>state</em> of your user, such as whether they&#x27;re
logged in or logged out.</p><p>Firebase Auth enables you to subscribe in realtime to this state via a <a href="https://api.flutter.dev/flutter/dart-async/Stream-class.html"><code>Stream</code></a>.
Once called, the stream provides an immidiate event of the users current authentication state, and then provides subsequent events whenever
the authentication state changes.</p><p>To subscribe to these changes, call the <code>authStateChanges()</code> method on your <a href="https://pub.dev/documentation/firebase_auth/latest/firebase_auth/FirebaseAuth-class.html" target="_blank"><code>FirebaseAuth</code></a> instance:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FirebaseAuth.instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .authStateChanges()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .listen((User user) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (user == null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      print(&#x27;User is currently signed out!&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      print(&#x27;User is signed in!&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><p>The stream returns a <span><code>User</code></span> class if the user is signed in, or <code>null</code> if they are not. You can read more
about managing your users below.</p><p>If you also need authentication state change events along with any user token refresh events, you can subscribe via the
<code>idTokenChanges()</code> method instead.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="persisting-authentication-state"></a>Persisting authentication state<a aria-hidden="true" tabindex="-1" class="hash-link" href="#persisting-authentication-state" title="Direct link to heading">#</a></h2><p>The Firebase SDKs for all platforms provide out of the box support for ensuring that your users authentication state is persisted across
app restarts or page reloads.</p><p>On native platforms such as Android &amp; iOS, this behaviour is not configurable and the users authenticate state will be persisted on-device
between app restarts. The user can clear the apps cached data via the device settings which will wipe any existing state being stored.</p><p>On web platforms, the users authentication state is stored in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer">local storage</a>.
If required you can change this default behaviour to only persist authentication state for the current session, or not at all. To configure
these settings, call the <code>setPersistence()</code> method (note; on native platforms an <a href="https://api.flutter.dev/flutter/dart-core/UnimplementedError-class.html"><code>UnimplementedError</code></a>)
will be thrown):</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Disable persistence on web platforms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">await FirebaseAuth.instance.setPersistence(Persistence.NONE);</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sign-in-methods"></a>Sign-in methods<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sign-in-methods" title="Direct link to heading">#</a></h2><p>Firebase provides a number of ways to sign users into your application, from anonymous users, password authentication,
phone authentication and using OAuth/social providers.</p><p>Before using any sign-in methods, ensure you have configured the <a href="https://console.firebase.google.com/project/_/authentication/providers" target="_blank" rel="noopener noreferrer">sign-in methods</a>
on the Firebase console.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="anonymous-sign-in"></a>Anonymous sign-in<a aria-hidden="true" tabindex="-1" class="hash-link" href="#anonymous-sign-in" title="Direct link to heading">#</a></h2><p>Even though many applications do not require the user to explicially sign into an application, it is important that you are able
to uniquely identify your users (for both analytical and security reasons). Anonymous sign-in provides an extra layer of security if
using Firebases Firestore, Realtime Database or even an external API, since you&#x27;re able to detect whether a request comes from an authenticated user.</p><p>If no previous anonymous account on the platform (for your specific application) has been created, when signing in anonymously Firebase
will create a new unqiue user which will be persisted across app restarts/page reloads. If the user signs-out and reauthenticates
anonymously again, they will be signed-in with the previously created account. It is however important to remember the anonymous account created
will not be persisted if the user uninstalls the application, clears their browser storage or uses a private browsing method (e.g.
incognito mode on Google Chrome).</p><p>To get started, call the <code>signInAnonymously()</code> method on the <a href="https://pub.dev/documentation/firebase_auth/latest/firebase_auth/FirebaseAuth-class.html" target="_blank"><code>FirebaseAuth</code></a> instance:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">UserCredential userCredential = await FirebaseAuth.instance.signInAnonymously();</span></div></div></div></div></div><p>Once successfully resolved, the user will be granted an anonymous account. If you are listening to changes in
<a href="#authentication-state">authentication state</a>, a new event will be sent to your listeners.</p><p>To learn more about how you can handle any errors which are thrown from the method, view the <a href="/docs/auth/auth/error-handling">Error Handling</a>
documentation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="emailpassword-registration--sign-in"></a>Email/Password Registration &amp; Sign-in<a aria-hidden="true" tabindex="-1" class="hash-link" href="#emailpassword-registration--sign-in" title="Direct link to heading">#</a></h2><p>Email/Password is a common user sign in method for most applications. This requires the user to provide an email address
and secure password. Users can register new accounts with a method called <code>createUserWithEmailAndPassword()</code> or sign in to
an existing account with <code>signInWithEmailAndPassword()</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="registration"></a>Registration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#registration" title="Direct link to heading">#</a></h3><p>To create a new account on your Firebase project call the <code>createUserWithEmailAndPassword()</code> method with the users email address
and password:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  UserCredential user = await FirebaseAuth.instance.createUserWithEmailAndPassword(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    email: &quot;barry.allen@example.com&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password: &quot;SuperSecretPassword!&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch on FirebaseAuthException (e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (e.code == &#x27;weak-password&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;The password provided is too weak.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  } else if (e.code == &#x27;email-already-in-use&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;The account already exists for that email.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch (e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  print(e.toString());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>The method is a two-step operation; it will first create the new account (if it does not already exist and the password is valid) and
then automatically sign in the user in to that account. If you are listening to changes in <a href="#authentication-state">authentication state</a>,
a new event will be sent to your listeners.</p><p>To learn more about how you can handle any errors which are thrown from the method, view the <a href="/docs/auth/auth/error-handling">Error Handling</a>
documentation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sign-in"></a>Sign-in<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sign-in" title="Direct link to heading">#</a></h3><p>To sign-in to an existing account, call the <code>signInWithEmailAndPassword()</code> method:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  UserCredential user = await FirebaseAuth.instance.signInWithEmailAndPassword(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    email: &quot;barry.allen@example.com&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password: &quot;SuperSecretPassword!&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch on FirebaseAuthException (e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (e.code == &#x27;user-not-found&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;No user found for that email.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  } else if (e.code == &#x27;wrong-password&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;Wrong password provided for that user.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Once successful, if you are listening to changes in <a href="#authentication-state">authentication state</a>, a new event will be sent to your
listeners.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="verifying-a-users-email"></a>Verifying a users email<a aria-hidden="true" tabindex="-1" class="hash-link" href="#verifying-a-users-email" title="Direct link to heading">#</a></h3><p>Even though the above authentication flows sign a user into your application, they can provide any valid email address even if they
do not have access to that email address. In many cases, you may wish to make a user verify the provided email address before you
grant them full access to your application.</p><p>The <span><code>User</code></span> class provides a <code>sendEmailVerification()</code> method and <code>emailVerified</code> property which you can use to handle
this scenario.</p><p>For example, once signed in you can check the property and send an email verification to the user:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">User user = FirebaseAuth.instance.currentUser;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (!user.emailVerified) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  await user.sendEmailVerification();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Firebase will send an automated email to the user with a unique code. This code can then be entered via the <code>applyActionCode()</code> method.
You can first check whether the code is valid by using the <code>checkActionCode()</code> method:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FirebaseAuth auth = FirebaseAuth.instance;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Get the code from the email:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">String code = &#x27;xxxxxxx&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  await auth.checkActionCode(code);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  await auth.applyActionCode(code);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // If successful, reload the user:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  auth.currentUser.reload();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch on FirebaseAuthException (e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (e.code == &#x27;invalid-action-code&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;The code is invalid.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>To learn more about how you can handle any errors which are thrown from the method, view the <a href="/docs/auth/auth/error-handling">Error Handling</a>
documentation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="signing-out"></a>Signing Out<a aria-hidden="true" tabindex="-1" class="hash-link" href="#signing-out" title="Direct link to heading">#</a></h2><p>To sign a user out, call the <code>signOut()</code> method:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">await FirebaseAuth.instance.signOut();</span></div></div></div></div></div><p>If you are listening to changes in <a href="#authentication-state">authentication state</a>, a new event will be sent to your
listeners.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="other-sign-in-methods"></a>Other sign-in methods<a aria-hidden="true" tabindex="-1" class="hash-link" href="#other-sign-in-methods" title="Direct link to heading">#</a></h2><p>Firebase also supports authenticating with external provides. To learn more, view the documentation for your authentication method:</p><ul><li><a href="/docs/auth/social#apple">Apple Sign-In.</a></li><li><a href="/docs/auth/social#facebook">Facebook Sign-In.</a></li><li><a href="/docs/auth/social#twitter">Twitter Sign-In.</a></li><li><a href="/docs/auth/social#google">Google Sign-In.</a></li><li><a href="/docs/auth/phone">Phone Number Sign-In.</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="user-management"></a>User management<a aria-hidden="true" tabindex="-1" class="hash-link" href="#user-management" title="Direct link to heading">#</a></h2><p>Once authenticated, FlutterFire provides you access to the user via the <span><code>User</code></span> class. The class stores the
current information about the user such as their unique user ID, any linked provider accounts and methods to manage the user.</p><p>The <span><code>User</code></span> class is returned from any <a href="#authentication-state">authentication state</a> listeners, or as part of
a <span><code>UserCredential</code></span> when using authentication methods. If you are sure the user is currently signed-in,
you can also access the <code>User</code> via the <code>currentUser</code> property on the <code>FirebaseAuth</code> instance. The examples below show how to access the
user:</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_3zTA tabs__item--active">currentUser</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_3zTA">Sign-in Methods</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_3zTA">State Listener Stream</li></ul><div role="tabpanel" class="margin-vert--md"><div><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FirebaseAuth auth = FirebaseAuth.instance;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (auth.currentUser != null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  print(auth.currentUser.uid);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deleting-a-user"></a>Deleting a user<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deleting-a-user" title="Direct link to heading">#</a></h3><p>If your user wishes to delete their account from your project, this can be achived with the <code>delete()</code> method. Since this is a
security-sensitive operation, it requires that user must have recently signed-in. You can handle this scenario by catching the error, for
example:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  await FirebaseAuth.instance.currentUser.delete();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch on FirebaseAuthException (e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (e.code == &#x27;requires-recent-login&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;The user must reauthenticate before this operation can be executed.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="reauthenticating-a-user"></a>Reauthenticating a user<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reauthenticating-a-user" title="Direct link to heading">#</a></h3><p>As mentioned above, some operations such as deleting the user, updating their email address or provide require the user to have recently
signed in. Rather than signing the user out and back in again, the <code>reauthenticateWithCredential()</code> method can be called. If a recent login
is required, create a new <a href="https://pub.dev/documentation/firebase_auth_platform_interface/latest/firebase_auth_platform_interface/AuthCredential-class.html" target="_blank"><code>AuthCredential</code></a> and pass it to the method. For example,
to reauthenticate with email &amp; password, create a new <a href="https://pub.dev/documentation/firebase_auth_platform_interface/latest/firebase_auth_platform_interface/EmailAuthCredential-class.html" target="_blank"><code>EmailAuthCredential</code></a>:</p><div class="mdxCodeBlock_x_oC"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Prompt the user to enter their email and password</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">String email = &#x27;barry.allen@example.com&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">String password = &#x27;SuperSecretPassword!&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Create a credential</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">EmailAuthCredential credential = EmailAuthProvider.credential(email, password);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Reauthenticate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">await FirebaseAuth.instance.currentUser.reauthenticateWithCredential(credential);</span></div></div></div></div></div><p>Reauthentication also works if you are using an OAuth credential instead.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/FirebaseExtended/flutterfire/edit/next/docs/../docs/auth/usage.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/auth/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Authentication</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/auth/social"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Social Authentication »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#authentication-state" class="table-of-contents__link">Authentication state</a></li><li><a href="#persisting-authentication-state" class="table-of-contents__link">Persisting authentication state</a></li><li><a href="#sign-in-methods" class="table-of-contents__link">Sign-in methods</a></li><li><a href="#anonymous-sign-in" class="table-of-contents__link">Anonymous sign-in</a></li><li><a href="#emailpassword-registration--sign-in" class="table-of-contents__link">Email/Password Registration &amp; Sign-in</a><ul><li><a href="#registration" class="table-of-contents__link">Registration</a></li><li><a href="#sign-in" class="table-of-contents__link">Sign-in</a></li><li><a href="#verifying-a-users-email" class="table-of-contents__link">Verifying a users email</a></li></ul></li><li><a href="#signing-out" class="table-of-contents__link">Signing Out</a></li><li><a href="#other-sign-in-methods" class="table-of-contents__link">Other sign-in methods</a></li><li><a href="#user-management" class="table-of-contents__link">User management</a><ul><li><a href="#deleting-a-user" class="table-of-contents__link">Deleting a user</a></li><li><a href="#reauthenticating-a-user" class="table-of-contents__link">Reauthenticating a user</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation/android">Android Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation/ios">iOS Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation/web">Web Installation</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/flutterfire" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://flutter.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flutter</a></li><li class="footer__item"><a href="https://pub.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">pub.dev</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/FirebaseExtended/flutterfire" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/flutterfiredev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div><div style="margin-top: 3rem"><small>Except as otherwise noted, this work is licensed under a Creative Commons Attribution 4.0 International License, and code samples are licensed under the BSD License.</small></div></div></div></div></footer></div>
<script src="/styles.e7074577.js"></script>
<script src="/runtime~main.0551df17.js"></script>
<script src="/main.7f974696.js"></script>
<script src="/1.5e72a75a.js"></script>
<script src="/2.729facbb.js"></script>
<script src="/1be78505.48e83a25.js"></script>
<script src="/39.d035ed31.js"></script>
<script src="/41.0766119e.js"></script>
<script src="/20ac7829.af96a31a.js"></script>
<script src="/1d2d000f.fb19e66f.js"></script>
</body>
</html>