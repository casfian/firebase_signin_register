(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{159:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"rightToc",(function(){return d})),t.d(n,"default",(function(){return p}));var i=t(2),r=t(9),a=(t(0),t(180)),o={title:"Android Installation"},l={id:"installation/android",title:"Android Installation",description:"Before using FlutterFire on Android, you must first connect to your Firebase project with your Android application.",source:"@site/../docs/installation/android.mdx",permalink:"/docs/installation/android",editUrl:"https://github.com/FirebaseExtended/flutterfire/edit/next/docs/../docs/installation/android.mdx",sidebar:"main",previous:{title:"FlutterFire Overview",permalink:"/docs/overview"},next:{title:"iOS Installation",permalink:"/docs/installation/ios"}},d=[{value:"Generating Android credentials",id:"generating-android-credentials",children:[]},{value:"Validate Android credentials",id:"validate-android-credentials",children:[]},{value:"Building for Android",id:"building-for-android",children:[{value:"Enabling Multidex",id:"enabling-multidex",children:[]}]},{value:"Initializing FlutterFire",id:"initializing-flutterfire",children:[]}],c={rightToc:d};function p(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Before using FlutterFire on Android, you must first connect to your Firebase project with your Android application."),Object(a.b)("h2",{id:"generating-android-credentials"},"Generating Android credentials"),Object(a.b)("p",null,"On the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"https://console.firebase.google.com/project/_/overview"}),"Firebase Console"),", add a new Android app or select an\nexisting Android app for your Firebase project."),Object(a.b)("p",null,'The "Android package name" must match your local project\'s package name that was created when you started the\nFlutter project. The current package name can be found in the ',Object(a.b)("inlineCode",{parentName:"p"},"manifest")," tag within the project's\n",Object(a.b)("inlineCode",{parentName:"p"},"/android/app/src/main/AndroidManifest.xml")," file."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},'When creating a new Android app "debug signing certificate SHA-1" is optional, however, it is required for Dynamic Links\n& Phone Authentication. To generate a certificate run ',Object(a.b)("inlineCode",{parentName:"p"},"cd android && ./gradlew signingReport")," and copy the SHA1 from\nthe ",Object(a.b)("inlineCode",{parentName:"p"},"debug")," key. This generates two variant keys. You can copy the 'SHA1' that belongs to the ",Object(a.b)("inlineCode",{parentName:"p"},"debugAndroidTest")," variant key option.")),Object(a.b)("p",null,"Once your Android app has been registered, download the credential file from the Firebase Console (the file is called\n",Object(a.b)("inlineCode",{parentName:"p"},"google-services.json"),"). Add this file into the ",Object(a.b)("inlineCode",{parentName:"p"},"android/app")," directory within your Flutter project."),Object(a.b)("h2",{id:"validate-android-credentials"},"Validate Android credentials"),Object(a.b)("p",null,"To allow Android to validate the credentials, the 'google-services' plugin must be applied on the project. This requires\nmodification to two files in the ",Object(a.b)("inlineCode",{parentName:"p"},"android/")," directory."),Object(a.b)("p",null,"First, add the 'google-services' plugin as a dependency inside of the ",Object(a.b)("inlineCode",{parentName:"p"},"android/build.gradle")," file:"),Object(a.b)("pre",null,Object(a.b)("code",Object(i.a)({parentName:"pre"},{className:"language-java",metastring:'{4} title="android/build.gradle"',"{4}":!0,title:'"android/build.gradle"'}),"buildscript {\n  dependencies {\n    // ... other dependencies\n    classpath 'com.google.gms:google-services:{{ android.google_services }}'\n  }\n}\n")),Object(a.b)("p",null,"Lastly, execute the plugin by adding the following underneath the line ",Object(a.b)("inlineCode",{parentName:"p"},"apply plugin: 'com.android.application'"),", within\nthe ",Object(a.b)("inlineCode",{parentName:"p"},"/android/app/build.gradle")," file:"),Object(a.b)("pre",null,Object(a.b)("code",Object(i.a)({parentName:"pre"},{className:"language-java",metastring:'title="android/app/build.gradle"',title:'"android/app/build.gradle"'}),"apply plugin: 'com.google.gms.google-services'\n")),Object(a.b)("h2",{id:"building-for-android"},"Building for Android"),Object(a.b)("p",null,"Due to the large number of classes in some FlutterFire plugins, it may bump you over the 64k method limit on the Android\nbuild system and you will get an error stating ",Object(a.b)("inlineCode",{parentName:"p"},"Error while merging dex archives: The number of method references in a .dex file cannot exceed 64K"),"."),Object(a.b)("p",null,"If you do get this error, we suggest enabling Multidex for Android."),Object(a.b)("h3",{id:"enabling-multidex"},"Enabling Multidex"),Object(a.b)("p",null,"Open the ",Object(a.b)("inlineCode",{parentName:"p"},"/android/app/build.gradle")," file.  Under ",Object(a.b)("inlineCode",{parentName:"p"},"dependencies")," you need to add the multidex module, and enable it within\nthe ",Object(a.b)("inlineCode",{parentName:"p"},"defaultConfig"),":"),Object(a.b)("pre",null,Object(a.b)("code",Object(i.a)({parentName:"pre"},{className:"language-groovy",metastring:"highlight={3,8}",highlight:"{3,8}"}),"android {\n    defaultConfig {\n        multiDexEnabled true\n    }\n}\n\ndependencies {\n  implementation 'com.android.support:multidex:1.0.3'\n}\n")),Object(a.b)("h2",{id:"initializing-flutterfire"},"Initializing FlutterFire"),Object(a.b)("p",null,"Once complete follow the instructions on ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/overview#initializing-flutterfire"}),"Initializing FlutterFire"),"."))}p.isMDXComponent=!0},180:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return g}));var i=t(0),r=t.n(i);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=r.a.createContext({}),p=function(e){var n=r.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=p(e.components);return r.a.createElement(c.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},b=r.a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,c=d(e,["components","mdxType","originalType","parentName"]),u=p(t),b=i,g=u["".concat(o,".").concat(b)]||u[b]||s[b]||a;return t?r.a.createElement(g,l(l({ref:n},c),{},{components:t})):r.a.createElement(g,l({ref:n},c))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=b;var l={};for(var d in n)hasOwnProperty.call(n,d)&&(l[d]=n[d]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<a;c++)o[c]=t[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);